<!DOCTYPE html>
<html>
<head>
	<title>The Elephant and the Top Hat</title>

	<!--Bulma CSS Link-->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.2/css/bulma.css">
  <script src="https://use.fontawesome.com/9639f71805.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>

<div class="tabs is-right">
  <ul>
    <li class="is-active"><a href="/"><i class="fa fa-home" aria-hidden="true"></i></a></li>
    <li><a href="/waitlist">See WaitList</a></li>
  </ul>
</div>

<section class="hero is-primary">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
       	Make your reservation
      </h1>
      <h2 class="subtitle">
        Please fill out your information and you will be seated shortly!
      </h2>
    </div>
  </div>
</section>
<br><br>
<!--left column-->
<div class="columns">
  <div class="column">
  </div>

<!--Page Content Column-->
  <div class="column is-three-quarters">
<div class="field">
  <label class="label">Full Name</label>
  <p class="control">
    <input class="input is-primary" id="name" type="text" placeholder="Full Name">
  </p>
</div>

<div class="field">
  <label class="label">Phone Number</label>
  <p class="control">
    <input class="input is-primary" id="phone" type="text" placeholder="Phone Number">
  </p>
</div>

<div class="field">
  <label class="label">Email</label>
  <p class="control">
    <input class="input is-primary" id="email" type="text" placeholder="Email">
  </p>
</div>

<!--Submit Button-->
<p class="control">
	<a href="/waitlist"><button class="button is-primary is-large" id="Reservation">Finalize Reservation</button></a>
</p>
  </div>

<!-- Right Column-->
  <div class="column">
  </div>
</div>
</body>
</html>



   <script type="text/javascript">
    $("#Reservation").on("click", function(event) {
      event.preventDefault();
      for (var i = 0; i < currentTables.open.length; i ++){
        if ($.get(currentTables.open.length) > 0) {
          var newReservation = {
            bookedby: $("#name").val().trim(),
            booked: true
          };
          $.post("/api/tables", newReservation)
            .done(function(data) {
              console.log(data);
            }
        }
        else {
          var newWaitlist = {
            bookedby: $("#name").val().trim(),
            booked: true
          };
            $.post("/api/tables", newWaitlist)
              .done(function(data) {
                console.log(data);
              });
        }
    };
    });
    </script>